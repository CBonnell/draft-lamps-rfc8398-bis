<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Internationalized Email Addresses in X.509 Certificates</title>
<meta content="Alexey Melnikov" name="author">
<meta content="Wei Chuang" name="author">
<meta content="Corey Bonnell" name="author">
<meta content="
       This document defines a new name form for inclusion in the otherName
field of an X.509 Subject Alternative Name and Issuer Alternative
Name extension that allows a certificate subject to be associated
with an internationalized email address. 
       This document updates RFC 5280 and obsoletes RFC 8398. 
    " name="description">
<meta content="xml2rfc 3.19.2" name="generator">
<meta content="EAI" name="keyword">
<meta content="PKIX" name="keyword">
<meta content="email address" name="keyword">
<meta content="draft-ietf-lamps-rfc8398bis-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.19.2
    Python 3.11.6
    ConfigArgParse 1.7
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.3
    platformdirs 4.2.0
    pycountry 22.3.5
    PyYAML 6.0.1
    requests 2.31.0
    setuptools 68.2.2
    six 1.16.0
    wcwidth 0.2.13
-->
<link href="draft-ietf-lamps-rfc8398bis.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
  margin-right: 1ch;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 2px 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
  .toplink {
    display: none;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">I18N Mail Addresses in X.509 Certificate</td>
<td class="right">February 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Melnikov, et al.</td>
<td class="center">Expires 16 August 2024</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-lamps-rfc8398bis-latest</dd>
<dt class="label-obsoletes">Obsoletes:</dt>
<dd class="obsoletes">
<a href="https://www.rfc-editor.org/rfc/rfc8398" class="eref">8398</a> (if approved)</dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a href="https://www.rfc-editor.org/rfc/rfc5280" class="eref">5280</a> (if approved)</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-02-13" class="published">13 February 2024</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2024-08-16">16 August 2024</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">A. Melnikov</div>
<div class="org">Isode Ltd</div>
</div>
<div class="author">
      <div class="author-name">W. Chuang</div>
<div class="org">Google, Inc.</div>
</div>
<div class="author">
      <div class="author-name">C. Bonnell</div>
<div class="org">DigiCert</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Internationalized Email Addresses in X.509 Certificates</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines a new name form for inclusion in the otherName
field of an X.509 Subject Alternative Name and Issuer Alternative
Name extension that allows a certificate subject to be associated
with an internationalized email address.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">This document updates RFC 5280 and obsoletes RFC 8398.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://CBonnell.github.io/draft-lamps-rfc8398-bis/draft-bonnell-lamps-rfc8398bis.html">https://CBonnell.github.io/draft-lamps-rfc8398-bis/draft-bonnell-lamps-rfc8398bis.html</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-ietf-lamps-rfc8398bis/">https://datatracker.ietf.org/doc/draft-ietf-lamps-rfc8398bis/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        Limited Additional Mechanisms for PKIX and SMIME (lamps) Working Group mailing list (<span><a href="mailto:spasm@ietf.org">mailto:spasm@ietf.org</a></span>),
        which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/spasm/">https://mailarchive.ietf.org/arch/browse/spasm/</a></span>.
        Subscribe at <span><a href="https://www.ietf.org/mailman/listinfo/spasm/">https://www.ietf.org/mailman/listinfo/spasm/</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/CBonnell/draft-lamps-rfc8398-bis">https://github.com/CBonnell/draft-lamps-rfc8398-bis</a></span>.<a href="#section-note.1-4" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 16 August 2024.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-conventions-and-definitions" class="internal xref">Conventions and Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-name-definitions" class="internal xref">Name Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-idna2008" class="internal xref">IDNA2008</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-matching-of-internationaliz" class="internal xref">Matching of Internationalized Email Addresses in X.509 Certificates</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-name-constraints-in-path-va" class="internal xref">Name Constraints in Path Validation</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-differences-from-rfc-8398" class="internal xref">Differences from RFC 8398</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-asn1-module" class="internal xref">ASN.1 Module</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-example-of-smtputf8mailbox" class="internal xref">Example of SmtpUTF8Mailbox</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1"><span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span> defines the rfc822Name subjectAltName name type for
representing email addresses as described in <span>[<a href="#RFC5321" class="cite xref">RFC5321</a>]</span>.  The syntax
of rfc822Name is restricted to a subset of US-ASCII characters and
thus can't be used to represent internationalized email addresses
<span>[<a href="#RFC6531" class="cite xref">RFC6531</a>]</span>.  This document defines a new otherName variant to
represent internationalized email addresses.  In addition this
document requires all email address domains in X.509 certificates to
conform to IDNA2008 <span>[<a href="#RFC5890" class="cite xref">RFC5890</a>]</span>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">This document obsoletes <span>[<a href="#RFC8398" class="cite xref">RFC8398</a>]</span>. The primary motivation for
publication of this document is to simplify the encoding of domain labels
found in the domain part of internationalized email addresses. In
particular, <span>[<a href="#RFC8398" class="cite xref">RFC8398</a>]</span> specifies that domain labels are conditionally
encoded using either A-labels or U-labels. This specification simplifies
encoding and processing of domain labels by mandating that the A-label
representation be used in all cases.<a href="#section-1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conventions-and-definitions">
<section id="section-2">
      <h2 id="name-conventions-and-definitions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="name-definitions">
<section id="section-3">
      <h2 id="name-name-definitions">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-name-definitions" class="section-name selfRef">Name Definitions</a>
      </h2>
<p id="section-3-1">The GeneralName structure is defined in <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span> and supports many
different name forms including otherName for extensibility.  This
section specifies the SmtpUTF8Mailbox name form of otherName so that
internationalized email addresses can appear in the subjectAltName of
a certificate, the issuerAltName of a certificate, or anywhere else
that GeneralName is used.<a href="#section-3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3-2">
<pre>
id-on-SmtpUTF8Mailbox OBJECT IDENTIFIER ::= { id-on 9 }

SmtpUTF8Mailbox ::= UTF8String (SIZE (1..MAX))
-- SmtpUTF8Mailbox conforms to Mailbox as specified
-- in Section 3.3 of RFC 6531. Additionally, all domain
-- labels included in the SmtpUTF8Mailbox value are
-- encoded as LDH-labels. In particular, domain labels
-- are not encoded as U-labels and instead are encoded
-- using their A-label representation.
</pre><a href="#section-3-2" class="pilcrow">¶</a>
</div>
<p id="section-3-3">When the subjectAltName (or issuerAltName) extension contains an
internationalized email address with a non-ASCII Local-part, the
address <span class="bcp14">MUST</span> be stored in the SmtpUTF8Mailbox name form of otherName.
The format of SmtpUTF8Mailbox is a modified version of the
internationalized Mailbox that was defined in Section 3.3 of
<span>[<a href="#RFC6531" class="cite xref">RFC6531</a>]</span>, which was derived from Mailbox as defined in Section 4.1.2
of <span>[<a href="#RFC5321" class="cite xref">RFC5321</a>]</span>.  <span>[<a href="#RFC6531" class="cite xref">RFC6531</a>]</span> defines the following ABNF rules for Mailbox
whose parts are modified for internationalization: <code>Local-part</code>,
<code>Dot-string</code>, <code>Quoted-string</code>, <code>QcontentSMTP</code>, <code>Domain</code>, and <code>Atom</code>.
In particular, <code>Local-part</code> was updated to also support
UTF8-non-ascii.  UTF8-non-ascii was described by Section 3.1 of
<span>[<a href="#RFC6532" class="cite xref">RFC6532</a>]</span>. Also, domain was extended to support U-labels, as defined
in <span>[<a href="#RFC5890" class="cite xref">RFC5890</a>]</span>.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">This document further refines internationalized Mailbox ABNF rules as
described in <span>[<a href="#RFC6531" class="cite xref">RFC6531</a>]</span> and calls this SmtpUTF8Mailbox.  In
SmtpUTF8Mailbox, labels that include non-ASCII characters <span class="bcp14">MUST</span> be
stored in A-label (rather than U-label) form <span>[<a href="#RFC5890" class="cite xref">RFC5890</a>]</span>.  This
restriction reduces complexity for implementations of the certification
path validation algorithm defined in Section 6 of <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span>.  In
SmtpUTF8Mailbox, domain labels that solely use ASCII characters (meaning
neither A- nor U-labels) <span class="bcp14">SHALL</span> use NR-LDH restrictions as specified by
Section 2.3.1 of <span>[<a href="#RFC5890" class="cite xref">RFC5890</a>]</span>.  NR-LDH stands for "Non-Reserved Letters
Digits Hyphen" and is the set of LDH labels that do not have "--"
characters in the third and forth character position, which excludes
"tagged domain names" such as A-labels. To facilitate octet-for-octet
comparisons of SmtpUTF8Mailbox values, all NR-LDH and A-label labels
which constitute the domain part <span class="bcp14">SHALL</span> only be encoded with lowercase
letters. Consistent with the treatment of rfc822Name in <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span>,
SmtpUTF8Mailbox is an envelope <code>Mailbox</code> and has no phrase (such as a
common name) before it, has no comment (text surrounded in parentheses)
after it, and is not surrounded by "&lt;" and "&gt;" characters.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">Due to name constraint compatibility reasons described in <a href="#name-constraints" class="auto internal xref">Section 6</a>,
SmtpUTF8Mailbox subjectAltName <span class="bcp14">MUST NOT</span> be used unless the Local-part
of the email address contains non-ASCII characters.  When the
Local-part is ASCII, rfc822Name subjectAltName <span class="bcp14">MUST</span> be used instead of
SmtpUTF8Mailbox.  This is compatible with legacy software that
supports only rfc822Name (and not SmtpUTF8Mailbox).  The appropriate
usage of rfc822Name and SmtpUTF8Mailbox is summarized in Table 1
below.<a href="#section-3-5" class="pilcrow">¶</a></p>
<p id="section-3-6">SmtpUTF8Mailbox is encoded as UTF8String.  The UTF8String encoding
<span class="bcp14">MUST NOT</span> contain a Byte-Order-Mark (BOM) <span>[<a href="#RFC3629" class="cite xref">RFC3629</a>]</span> to aid consistency
across implementations, particularly for comparison.<a href="#section-3-6" class="pilcrow">¶</a></p>
<span id="name-email-address-formatting"></span><div id="santypes">
<table class="center" id="table-1">
        <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-email-address-formatting" class="selfRef">Email Address Formatting</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Local-part char</th>
            <th class="text-left" rowspan="1" colspan="1">subjectAltName</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ASCII-only</td>
            <td class="text-left" rowspan="1" colspan="1">rfc822Name</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">non-ASCII</td>
            <td class="text-left" rowspan="1" colspan="1">SmtpUTF8Mailbox</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-3-8">Non-ASCII Local-part values may additionally include ASCII characters.<a href="#section-3-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="idna2008">
<section id="section-4">
      <h2 id="name-idna2008">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-idna2008" class="section-name selfRef">IDNA2008</a>
      </h2>
<p id="section-4-1">To facilitate comparison between email addresses, all email address
domains in X.509 certificates <span class="bcp14">MUST</span> conform to IDNA2008 <span>[<a href="#RFC5890" class="cite xref">RFC5890</a>]</span> (and
avoid any "mappings" mentioned in that document).  Use of
non-conforming email address domains introduces the possibility of
conversion errors between alternate forms.  This applies to
SmtpUTF8Mailbox and rfc822Name in subjectAltName, issuerAltName, and
anywhere else that these are used.<a href="#section-4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="name-matching">
<section id="section-5">
      <h2 id="name-matching-of-internationaliz">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-matching-of-internationaliz" class="section-name selfRef">Matching of Internationalized Email Addresses in X.509 Certificates</a>
      </h2>
<p id="section-5-1">Equivalence comparisons with SmtpUTF8Mailbox consist of
a domain part step and a Local-part step.  The comparison form for
Local-parts is always UTF-8.  The comparison form for domain parts
is always performed with the LDH-label (<span>[<a href="#RFC5890" class="cite xref">RFC5890</a>]</span>) encoding of the
relevant domain labels. The comparison of LDH-labels in domain parts
reduces complexity for implementations of the certification path
validation algorithm as defined in Section 6 of <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span> by obviating
the need to convert domain labels to their Unicode representation.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">Comparison of two SmtpUTF8Mailboxes is straightforward with no setup
work needed.  They are considered equivalent if there is an exact
octet-for-octet match.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">Comparison of a SmtpUTF8Mailbox and rfc822Name will always fail.
SmtpUTF8Mailbox values <span class="bcp14">SHALL</span> contain a Local-part which includes
one or more non-ASCII characters, while rfc822Names only
include ASCII characters (including the Local-part). Thus, a
SmtpUTF8Mailbox and rfc822Name will never match.<a href="#section-5-3" class="pilcrow">¶</a></p>
<p id="section-5-4">Comparison of SmtpUTF8Mailbox values with internationalized email
addresses from other sources (such as received email messages, user
input, etc.) requires additional setup steps for domain part and
Local-part. The initial preparation for the email address to compare
with the SmtpUTF8Mailbox value is to remove any phrases, comments, and
"&lt;" or "&gt;" characters.<a href="#section-5-4" class="pilcrow">¶</a></p>
<p id="section-5-5">For the setup of the domain part, the following conversions <span class="bcp14">SHALL</span> be
performed:<a href="#section-5-5" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5-6">
<li id="section-5-6.1">
          <p id="section-5-6.1.1">Convert all labels which constitute the domain part that include
non-ASCII characters to A-labels if not already in that form.<a href="#section-5-6.1.1" class="pilcrow">¶</a></p>
<p id="section-5-6.1.2">
a. Detect all U-labels present within the domain part using
   Section 5.1 of <span>[<a href="#RFC5891" class="cite xref">RFC5891</a>]</span>.<a href="#section-5-6.1.2" class="pilcrow">¶</a></p>
<p id="section-5-6.1.3">
b. Transform all detected U-labels (Unicode) to A-labels (ASCII)
   as specified in Section 5.5 of <span>[<a href="#RFC5891" class="cite xref">RFC5891</a>]</span>.<a href="#section-5-6.1.3" class="pilcrow">¶</a></p>
</li>
        <li id="section-5-6.2">
          <p id="section-5-6.2.1">Convert all uppercase letters found within the NR-LDH and A-label
labels which constitute the domain part to lowercase letters.<a href="#section-5-6.2.1" class="pilcrow">¶</a></p>
</li>
      </ol>
<p id="section-5-7">For the setup of the Local-part, the Local-part <span class="bcp14">MUST</span> be verified to
conform to the requirements of <span>[<a href="#RFC6530" class="cite xref">RFC6530</a>]</span> and <span>[<a href="#RFC6531" class="cite xref">RFC6531</a>]</span>, including
being a string in UTF-8 form.  In particular, the Local-
part <span class="bcp14">MUST NOT</span> be transformed in any way, such as by doing case
folding or normalization of any kind.  The <code>Local-part</code> part of an
internationalized email address is already in UTF-8. Once setup is
complete, they are again compared octet-for-octet.<a href="#section-5-7" class="pilcrow">¶</a></p>
<p id="section-5-8">To summarize non-normatively, the comparison steps, including setup,
are:<a href="#section-5-8" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5-9">
<li id="section-5-9.1">
          <p id="section-5-9.1.1">If the domain contains U-labels, transform them to A-labels.<a href="#section-5-9.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-5-9.2">
          <p id="section-5-9.2.1">If any NR-LDH or A-label domain label in the domain part
contains uppercase letters, lowercase them.<a href="#section-5-9.2.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-5-9.3">
          <p id="section-5-9.3.1">Compare strings octet-for-octet for equivalence.<a href="#section-5-9.3.1" class="pilcrow">¶</a></p>
</li>
      </ol>
<p id="section-5-10">This specification expressly does not define any wildcard characters,
and SmtpUTF8Mailbox comparison implementations <span class="bcp14">MUST NOT</span> interpret any
characters as wildcards.  Instead, to specify multiple email
addresses through SmtpUTF8Mailbox, the certificate <span class="bcp14">MUST</span> use multiple
subjectAltNames or issuerAltNames to explicitly carry any additional
email addresses.<a href="#section-5-10" class="pilcrow">¶</a></p>
</section>
</div>
<div id="name-constraints">
<section id="section-6">
      <h2 id="name-name-constraints-in-path-va">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-name-constraints-in-path-va" class="section-name selfRef">Name Constraints in Path Validation</a>
      </h2>
<p id="section-6-1">This section updates Section 4.2.1.10 of <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span> to extend
rfc822Name name constraints to SmtpUTF8Mailbox subjectAltNames.
SmtpUTF8Mailbox-aware path validators will apply name constraint
comparison to the subject distinguished name and both forms of
subject alternative names rfc822Name and SmtpUTF8Mailbox.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">Both rfc822Name and SmtpUTF8Mailbox subject alternative names
represent the same underlying email address namespace.  Since legacy
CAs constrained to issue certificates for a specific set of domains
would lack corresponding UTF-8 constraints, <span>[<a href="#RFC8399BIS" class="cite xref">RFC8399BIS</a>]</span> updates,
modifies, and extends rfc822Name name constraints defined in
<span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span> to cover SmtpUTF8Mailbox subject alternative names.  This
ensures that the introduction of SmtpUTF8Mailbox does not violate
existing name constraints.  Since it is not valid to include
non-ASCII UTF-8 characters in the Local-part of rfc822Name name
constraints, and since name constraints that include a Local-part are
rarely, if at all, used in practice, name constraints updated in
<span>[<a href="#RFC8399BIS" class="cite xref">RFC8399BIS</a>]</span> allow the forms that represent all addresses at a host or
all mailboxes in a domain and deprecates rfc822Name name constraints
that represent a particular mailbox.  That is, rfc822Name constraints
with a Local-part <span class="bcp14">SHOULD NOT</span> be used.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">Constraint comparison with SmtpUTF8Mailbox subjectAltName starts with
the setup steps defined by <a href="#name-matching" class="auto internal xref">Section 5</a>.  Setup converts the inputs of
the comparison (which is one of a subject distinguished name, an
rfc822Name, or an SmtpUTF8Mailbox subjectAltName, and one of an
rfc822Name name constraint) to constraint comparison form. For both the
name constraint and the subject, this will convert all A-labels and
NR-LDH labels to lowercase. Strip the Local-part and "@"
separator from each rfc822Name and SmtpUTF8Mailbox, leaving just the
domain part.  After setup, this follows the comparison steps defined
in Section 4.2.1.10 of <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span> as follows.  If the resulting name
constraint domain starts with a "." character, then for the name
constraint to match, a suffix of the resulting subject alternative
name domain <span class="bcp14">MUST</span> match the name constraint (including the leading
".") octet-for-octet.  If the resulting name constraint domain does
not start with a "." character, then for the name constraint to
match, the entire resulting subject alternative name domain <span class="bcp14">MUST</span>
match the name constraint octet-for-octet.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">Certificate Authorities that wish to issue CA certificates with email
address name constraints <span class="bcp14">MUST</span> use rfc822Name subject alternative
names only.  These <span class="bcp14">MUST</span> be IDNA2008-conformant names with no mappings
and with non-ASCII domains encoded in A-labels only.<a href="#section-6-4" class="pilcrow">¶</a></p>
<p id="section-6-5">The name constraint requirement with SmtpUTF8Mailbox subject
alternative name is illustrated in the non-normative diagram in
<a href="#nctypes" class="auto internal xref">Figure 1</a>.  The first example (1) illustrates a permitted rfc822Name
ASCII-only host name name constraint and the corresponding valid
rfc822Name subjectAltName and SmtpUTF8Mailbox subjectAltName email
addresses.  The second example (2) illustrates a permitted rfc822Name
host name name constraint with A-label, and the corresponding valid
rfc822Name subjectAltName and SmtpUTF8Mailbox subjectAltName email
addresses.  Note that an email address with ASCII-only Local-part is
encoded as rfc822Name despite also having Unicode present in the
domain.<a href="#section-6-5" class="pilcrow">¶</a></p>
<span id="name-name-constraints-with-smtpu"></span><div id="nctypes">
<figure id="figure-1">
        <div class="alignLeft art-text artwork" id="section-6-6.1">
<pre>
+-------------------------------------------------------------------+
|  Root CA Cert                                                     |
+-------------------------------------------------------------------+
                                  |
                                  v
+-------------------------------------------------------------------+
|  Intermediate CA Cert                                             |
|      Permitted                                                    |
|        rfc822Name: elementary.school.example.com (1)              |
|                                                                   |
|        rfc822Name: xn--pss25c.example.com (2)                     |
|                                                                   |
+-------------------------------------------------------------------+
                                  |
                                  v
+-------------------------------------------------------------------+
|  Entity Cert (w/explicitly permitted subjects)                    |
|    SubjectAltName Extension                                       |
|      rfc822Name: student@elementary.school.example.com (1)         |
|      SmtpUTF8Mailbox: u+5B66u+751F@elementary.school.example.com  |
|        (1)                                                        |
|                                                                   |
|      rfc822Name: student@xn--pss25c.example.com (2)               |
|      SmtpUTF8Mailbox: u+533Bu+751F@xn--pss25c.example.com (2)     |
|                                                                   |
+-------------------------------------------------------------------+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-name-constraints-with-smtpu" class="selfRef">Name Constraints with SmtpUTF8Name and rfc822Name</a>
        </figcaption></figure>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">Use of SmtpUTF8Mailbox for certificate subjectAltName (and
issuerAltName) will incur many of the same security considerations as
in Section 8 in <span>[<a href="#RFC5280" class="cite xref">RFC5280</a>]</span>, but it introduces a new issue by
permitting non-ASCII characters in the email address Local-part.
This issue, as mentioned in Section 4.4 of <span>[<a href="#RFC5890" class="cite xref">RFC5890</a>]</span> and in Section 4
of <span>[<a href="#RFC6532" class="cite xref">RFC6532</a>]</span>, is that use of Unicode introduces the risk of visually
similar and identical characters that can be exploited to deceive the
recipient.  The former document references some means to mitigate
against these attacks.  See <span>[<a href="#WEBER" class="cite xref">WEBER</a>]</span> for more background on security
issues with Unicode.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">Additionally, it is possible to encode a string of Unicode
user-perceived characters in multiple ways. While various Unicode
normalization forms exist, <span>[<a href="#RFC6531" class="cite xref">RFC6531</a>]</span> does not mandate the use of any
such forms for the encoding of the Local-part. Thus, it may be possible
to encode a Local-part value in multiple ways. To mitigate against
attacks where different encodings are used by the mail system and the
Certification Authority issuing certificates containing
<code>SmtpUTF8Mailbox</code> values, this specification requires an octet-for-octet
comparison of the Local-part. However, requiring the use of binary
comparison may raise interoperability concerns where the mail system
employs one encoding and the Certification Authority employs another.<a href="#section-7-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="differences-from-rfc-8398">
<section id="section-8">
      <h2 id="name-differences-from-rfc-8398">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-differences-from-rfc-8398" class="section-name selfRef">Differences from RFC 8398</a>
      </h2>
<p id="section-8-1">This document obsoletes <span>[<a href="#RFC8398" class="cite xref">RFC8398</a>]</span>. There are three major changes
defined in this specification which deviate from <span>[<a href="#RFC8398" class="cite xref">RFC8398</a>]</span>:<a href="#section-8-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-8-2">
<li id="section-8-2.1">
          <p id="section-8-2.1.1">In all cases, domain labels in mail addresses <span class="bcp14">SHALL</span> be encoded as
LDH-labels. In particular, domain names <span class="bcp14">SHALL NOT</span> be encoded using
U-Labels and instead use A-Labels.<a href="#section-8-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-8-2.2">
          <p id="section-8-2.2.1">To accommodate the first change listed above, the mail address
matching algorithm defined in Section 5 of <span>[<a href="#RFC8398" class="cite xref">RFC8398</a>]</span> has been modified
to only accept domain labels that are encoded using their A-label
representation.<a href="#section-8-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-8-2.3">
          <p id="section-8-2.3.1">Additionally, the name constraints processing algorithm defined in
Section 6 of <span>[<a href="#RFC8398" class="cite xref">RFC8398</a>]</span> has been modified to only accept domain labels
that are encoded using their A-label representation.<a href="#section-8-2.3.1" class="pilcrow">¶</a></p>
</li>
      </ol>
</section>
</div>
<div id="iana-considerations">
<section id="section-9">
      <h2 id="name-iana-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-9-1">Update the document reference for the id-mod-lamps-eai-addresses-2016
module in the "SMI Security for PKIX Module Identifier"
(1.3.6.1.5.5.7.0) registry from RFC 8398 to this document.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">Update the document reference for the SmtpUTF8Mailbox otherName in the
"SMI Security for PKIX Other Name Forms" (1.3.6.1.5.5.7.8) registry
from RFC 8398 to this document.<a href="#section-9-2" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-10.1">
        <h3 id="name-normative-references">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3629">[RFC3629]</dt>
        <dd>
<span class="refAuthor">Yergeau, F.</span>, <span class="refTitle">"UTF-8, a transformation format of ISO 10646"</span>, <span class="seriesInfo">STD 63</span>, <span class="seriesInfo">RFC 3629</span>, <span class="seriesInfo">DOI 10.17487/RFC3629</span>, <time datetime="2003-11" class="refDate">November 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3629">https://www.rfc-editor.org/rfc/rfc3629</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5280">[RFC5280]</dt>
        <dd>
<span class="refAuthor">Cooper, D.</span>, <span class="refAuthor">Santesson, S.</span>, <span class="refAuthor">Farrell, S.</span>, <span class="refAuthor">Boeyen, S.</span>, <span class="refAuthor">Housley, R.</span>, and <span class="refAuthor">W. Polk</span>, <span class="refTitle">"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"</span>, <span class="seriesInfo">RFC 5280</span>, <span class="seriesInfo">DOI 10.17487/RFC5280</span>, <time datetime="2008-05" class="refDate">May 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5280">https://www.rfc-editor.org/rfc/rfc5280</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5321">[RFC5321]</dt>
        <dd>
<span class="refAuthor">Klensin, J.</span>, <span class="refTitle">"Simple Mail Transfer Protocol"</span>, <span class="seriesInfo">RFC 5321</span>, <span class="seriesInfo">DOI 10.17487/RFC5321</span>, <time datetime="2008-10" class="refDate">October 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5321">https://www.rfc-editor.org/rfc/rfc5321</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5890">[RFC5890]</dt>
        <dd>
<span class="refAuthor">Klensin, J.</span>, <span class="refTitle">"Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework"</span>, <span class="seriesInfo">RFC 5890</span>, <span class="seriesInfo">DOI 10.17487/RFC5890</span>, <time datetime="2010-08" class="refDate">August 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5890">https://www.rfc-editor.org/rfc/rfc5890</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5891">[RFC5891]</dt>
        <dd>
<span class="refAuthor">Klensin, J.</span>, <span class="refTitle">"Internationalized Domain Names in Applications (IDNA): Protocol"</span>, <span class="seriesInfo">RFC 5891</span>, <span class="seriesInfo">DOI 10.17487/RFC5891</span>, <time datetime="2010-08" class="refDate">August 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5891">https://www.rfc-editor.org/rfc/rfc5891</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6530">[RFC6530]</dt>
        <dd>
<span class="refAuthor">Klensin, J.</span> and <span class="refAuthor">Y. Ko</span>, <span class="refTitle">"Overview and Framework for Internationalized Email"</span>, <span class="seriesInfo">RFC 6530</span>, <span class="seriesInfo">DOI 10.17487/RFC6530</span>, <time datetime="2012-02" class="refDate">February 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6530">https://www.rfc-editor.org/rfc/rfc6530</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6531">[RFC6531]</dt>
        <dd>
<span class="refAuthor">Yao, J.</span> and <span class="refAuthor">W. Mao</span>, <span class="refTitle">"SMTP Extension for Internationalized Email"</span>, <span class="seriesInfo">RFC 6531</span>, <span class="seriesInfo">DOI 10.17487/RFC6531</span>, <time datetime="2012-02" class="refDate">February 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6531">https://www.rfc-editor.org/rfc/rfc6531</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6532">[RFC6532]</dt>
        <dd>
<span class="refAuthor">Yang, A.</span>, <span class="refAuthor">Steele, S.</span>, and <span class="refAuthor">N. Freed</span>, <span class="refTitle">"Internationalized Email Headers"</span>, <span class="seriesInfo">RFC 6532</span>, <span class="seriesInfo">DOI 10.17487/RFC6532</span>, <time datetime="2012-02" class="refDate">February 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6532">https://www.rfc-editor.org/rfc/rfc6532</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8398">[RFC8398]</dt>
        <dd>
<span class="refAuthor">Melnikov, A., Ed.</span> and <span class="refAuthor">W. Chuang, Ed.</span>, <span class="refTitle">"Internationalized Email Addresses in X.509 Certificates"</span>, <span class="seriesInfo">RFC 8398</span>, <span class="seriesInfo">DOI 10.17487/RFC8398</span>, <time datetime="2018-05" class="refDate">May 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8398">https://www.rfc-editor.org/rfc/rfc8398</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8399BIS">[RFC8399BIS]</dt>
      <dd>
<span class="refAuthor">Housley, R.</span>, <span class="refTitle">"Internationalization Updates to RFC 5280"</span>, <span>n.d.</span>, <span>&lt;<a href="https://datatracker.ietf.org/doc/draft-housley-lamps-rfc8399bis/">https://datatracker.ietf.org/doc/draft-housley-lamps-rfc8399bis/</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-10.2">
        <h3 id="name-informative-references">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC5912">[RFC5912]</dt>
        <dd>
<span class="refAuthor">Hoffman, P.</span> and <span class="refAuthor">J. Schaad</span>, <span class="refTitle">"New ASN.1 Modules for the Public Key Infrastructure Using X.509 (PKIX)"</span>, <span class="seriesInfo">RFC 5912</span>, <span class="seriesInfo">DOI 10.17487/RFC5912</span>, <time datetime="2010-06" class="refDate">June 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5912">https://www.rfc-editor.org/rfc/rfc5912</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="WEBER">[WEBER]</dt>
      <dd>
<span class="refAuthor">Weber, C.</span>, <span class="refTitle">"Attacking Software Globalization"</span>, <time datetime="2010-03" class="refDate">March 2010</time>, <span>&lt;<a href="https://www.lookout.net/files/Chris_Weber_Character%20Transformations%20v1.7_IUC33.pdf">https://www.lookout.net/files/Chris_Weber_Character%20Transformations%20v1.7_IUC33.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
<div id="asn1-module">
<section id="appendix-A">
      <h2 id="name-asn1-module">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-asn1-module" class="section-name selfRef">ASN.1 Module</a>
      </h2>
<p id="appendix-A-1">The following ASN.1 module normatively specifies the SmtpUTF8Mailbox
structure.  This specification uses the ASN.1 definitions from
<span>[<a href="#RFC5912" class="cite xref">RFC5912</a>]</span> with the 2002 ASN.1 notation used in that document.
<span>[<a href="#RFC5912" class="cite xref">RFC5912</a>]</span> updates normative documents using older ASN.1 notation.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-A-2">
<pre>
LAMPS-EaiAddresses-2016
{ iso(1) identified-organization(3) dod(6)
  internet(1) security(5) mechanisms(5) pkix(7) id-mod(0)
  id-mod-lamps-eai-addresses-2016(92) }

DEFINITIONS IMPLICIT TAGS ::=
BEGIN

IMPORTS
OTHER-NAME
FROM PKIX1Implicit-2009
  { iso(1) identified-organization(3) dod(6) internet(1) security(5)
  mechanisms(5) pkix(7) id-mod(0) id-mod-pkix1-implicit-02(59) }

id-pkix
FROM PKIX1Explicit-2009
  { iso(1) identified-organization(3) dod(6) internet(1) security(5)
  mechanisms(5) pkix(7) id-mod(0) id-mod-pkix1-explicit-02(51) } ;

--
-- otherName carries additional name types for subjectAltName,
-- issuerAltName, and other uses of GeneralNames.
--

id-on OBJECT IDENTIFIER ::= { id-pkix 8 }

SmtpUtf8OtherNames OTHER-NAME ::= { on-SmtpUTF8Mailbox, ... }

on-SmtpUTF8Mailbox OTHER-NAME ::= {
    SmtpUTF8Mailbox IDENTIFIED BY id-on-SmtpUTF8Mailbox
}

id-on-SmtpUTF8Mailbox OBJECT IDENTIFIER ::= { id-on 9 }

SmtpUTF8Mailbox ::= UTF8String (SIZE (1..MAX))
-- SmtpUTF8Mailbox conforms to Mailbox as specified
-- in Section 3.3 of RFC 6531. Additionally, all domain
-- labels included in the SmtpUTF8Mailbox value are
-- encoded as LDH-Labels. In particular, domain labels
-- are not encoded as U-Labels and instead are encoded
-- using their A-label representation.

END
</pre><a href="#appendix-A-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="example-of-smtputf8mailbox">
<section id="appendix-B">
      <h2 id="name-example-of-smtputf8mailbox">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-example-of-smtputf8mailbox" class="section-name selfRef">Example of SmtpUTF8Mailbox</a>
      </h2>
<p id="appendix-B-1">This non-normative example demonstrates using SmtpUTF8Mailbox as an
otherName in GeneralName to encode the email address
"u+533Bu+751F@xn--pss25c.example.com".<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<p id="appendix-B-2">The hexadecimal DER encoding of the block is:<a href="#appendix-B-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-B-3">
<pre>
a02b0608 2b060105 05070809 a01f0c1d e58cbbe7 949f4078 6e2d2d70
73733235 632e6578 616d706c 652e636f 6d
</pre><a href="#appendix-B-3" class="pilcrow">¶</a>
</div>
<p id="appendix-B-4">The text decoding is:<a href="#appendix-B-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-B-5">
<pre>
0  43: [0] {
2   8:   OBJECT IDENTIFIER '1 3 6 1 5 5 7 8 9'
12  31:   [0] {
14  29:     UTF8String 'u+533Bu+751F@xn--pss25c.example.com'
      :     }
      :   }
</pre><a href="#appendix-B-5" class="pilcrow">¶</a>
</div>
<p id="appendix-B-6">The example was encoded using Google's "der-ascii" program and the
above text decoding is an output of Peter Gutmann's "dumpasn1"
program.<a href="#appendix-B-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-C">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-C-1">The authors thank David Benjamin for providing the motivation for this
document. Additionally, the authors thank Éric Vyncke, John Levine,
Peter van Dijk, Rich Salz, Russ Housley, and Tim Hollebeek for their
reviews and feedback which meaningfully improved the document.<a href="#appendix-C-1" class="pilcrow">¶</a></p>
<p id="appendix-C-2">The authors also recognize and appreciate the following individuals for
their contributions to the previous version of this document:<a href="#appendix-C-2" class="pilcrow">¶</a></p>
<p id="appendix-C-3">Thank you to Magnus Nystrom for motivating this document.  Thanks to
Russ Housley, Nicolas Lidzborski, Laetitia Baudoin, Ryan Sleevi, Sean
Leonard, Sean Turner, John Levine, and Patrik Falstrom for their
feedback.  Also special thanks to John Klensin for his valuable input
on internationalization, Unicode, and ABNF formatting; to Jim Schaad
for his help with the ASN.1 example and his helpful feedback; and
especially to Viktor Dukhovni for helping us with name constraints
and his many detailed document reviews.<a href="#appendix-C-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-D">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Alexey Melnikov</span></div>
<div dir="auto" class="left"><span class="org">Isode Ltd</span></div>
<div dir="auto" class="left"><span class="street-address">14 Castle Mews</span></div>
<div dir="auto" class="left"><span class="locality">Hampton</span></div>
<div dir="auto" class="left"><span class="postal-code">TW12 2NP</span></div>
<div dir="auto" class="left"><span class="country-name">United Kingdom</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:Alexey.Melnikov@isode.com" class="email">Alexey.Melnikov@isode.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Wei Chuang</span></div>
<div dir="auto" class="left"><span class="org">Google, Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">1600 Amphitheater Parkway</span></div>
<div dir="auto" class="left">
<span class="locality">Mountain View</span>, <span class="region">CA</span> </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:weihaw@google.com" class="email">weihaw@google.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Corey Bonnell</span></div>
<div dir="auto" class="left"><span class="org">DigiCert</span></div>
<div dir="auto" class="left">
<span class="locality">Pittsburgh</span>, <span class="region">PA</span> </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:corey.bonnell@digicert.com" class="email">corey.bonnell@digicert.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
